Core Functionality:
Users can select text while composing a reply through two methods:
1. Click/Tap: Selects the specific word clicked
Drag: Selects the text dragged over
Selection must be contiguous
Selection persists until reply submitted/cancelled
Selection can be modified using drag handles
Technical Requirements:
Selection State:
Store selection range data in StoryTree context
Track: source post ID, selection positions, quoted text
Associate with reply being composed
UI Components:
Highlight styling for selected text
Draggable handles at selection boundaries
Quote preview in reply composer
Visual indication that post is in "reply mode"
3. User Interaction:
Click on word → selects whole word
Drag over text → creates selection
Handles can be dragged to adjust selection
Selection persists when clicking elsewhere
Only one active selection per reply composition
Data Storage:
Quote metadata stored with reply in backend
Includes reference to source post and selection positions

Selection persists when clicking elsewhere
Only one active selection per reply composition
Data Storage:
Quote metadata stored with reply in backend
Includes reference to source post and selection positions
No newline at end of file
Includes reference to source post and selection positions

Phase 1: Selection State Management
Update StoryTreeContext to include selection state:
Add selection range data (start/end positions)
Track source post ID
Store quoted text
Track active reply state
Create Selection Helper Functions:
Word selection logic for click events
Range selection logic for drag events
Selection boundary calculations
Text extraction from selection

Phase 2: UI Components & Interaction
Post Component Updates:
Add click handlers for word selection
Implement drag selection functionality
Add "reply mode" visual state
Selection UI:
Create selection highlight styling
Implement drag handles component
Handle drag events for selection modification
Reply Composer Updates:
Add quote preview section
Connect to selection state
Handle selection persistence

Phase 3: Backend Integration
Update `backend/db/DatabaseClientInterface.js`:
  - Update the `StoryTree` interface to include `quotes`: Array of quote objects.
Update `backend/server.js`:
  - Modify the `/api/createReply` endpoint to accept quote metadata in the request body and store it with the reply.
  - Modify the `/api/getStoryTree/:uuid` endpoint to return the quote metadata with the story tree.

Phase 4: Displaying replies
 - When loading a story tree, replies are displayed, as either children or siblings of each node
 - When there are replies to a node, the text of the node that has quote replies is highlighted
 - When the user clicks on the highlighted text, the replies which quoted that text are displayed